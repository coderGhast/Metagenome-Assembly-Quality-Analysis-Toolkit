<html>
<head></head>
<body>
<canvas id="orfcanvas" width="500" height="500" style="border:1px solid #000000;">
</canvas>
</body>
<script>

var data = [
        [[3,10, "ATGGGGGGGGGGGGTGA"], [90,92, "ATGGGGGGGGGGGGTGA"]],
        [[34,40, "ATGGGGGGGGGGGGTGA"]],
        [],
        [[70,80, "ATGGGGGGGGGGGGTGA"], [4,15, "ATGGGGGGGGGGGGTGA"]],
        [[67,85, "ATGGGGGGGGGGGGTGA"]],
        []
    ];

var canvas;
var context;
var orfDisplayWidth;
var orfDisplayHeight = 40;
var framePos = 10;
var framePosMofidier = 50;
// 1 percent of the size of the Orf display, so we can apply the data visuals to it easily
var orfLocationIndicatorMarkerTranslation;

function paintFrames(){
    context.rect(10,framePos + (framePosMofidier * 0),orfDisplayWidth,orfDisplayHeight);
    context.rect(10,framePos + (framePosMofidier * 1),orfDisplayWidth,orfDisplayHeight);
    context.rect(10,framePos + (framePosMofidier * 2),orfDisplayWidth,orfDisplayHeight);
    context.rect(10,framePos + (framePosMofidier * 3),orfDisplayWidth,orfDisplayHeight);
    context.rect(10,framePos + (framePosMofidier * 4),orfDisplayWidth,orfDisplayHeight);
    context.rect(10,framePos + (framePosMofidier * 5),orfDisplayWidth,orfDisplayHeight);

    for (var i = 0; i < data.length; i++) {
        for (var j = 0; j < data[i].length; j++) {
            context.fillStyle="#5E9DC8";
            context.fillRect(
                (10 + (orfLocationIndicatorMarkerTranslation * data[i][j][0])), 
                framePos + (framePosMofidier * i),
                ((orfLocationIndicatorMarkerTranslation* data[i][j][1]) - (orfLocationIndicatorMarkerTranslation* data[i][j][0])),
                orfDisplayHeight);
        };
    };
    context.stroke();
}

function init(){
    canvas = document.getElementById("orfcanvas");
    canvas.addEventListener("click", onClick, false);
    canvas.width= 800
    context = canvas.getContext("2d");
    orfDisplayWidth = canvas.width-20;
    orfLocationIndicatorMarkerTranslation = orfDisplayWidth / 100;

    paintFrames();

}


function checkIfWithinORFLocation(boundaries, event, frameNumber){
    var pageY = event.pageY;
    var pageX = event.pageX;
    for(var i = 0; i < data[frameNumber].length; i++){
        if( pageX >= (10 + boundaries.left) + (orfLocationIndicatorMarkerTranslation * data[frameNumber][i][0]) && 
            pageX <= (10 + boundaries.left) + (orfLocationIndicatorMarkerTranslation * data[frameNumber][i][1])){
            alert("Within ORF Location, Frame: " + (frameNumber + 1) + " ORF: " + i);
        }
    }
}

function withinFrameLocations(pageY, boundaries){
    for (var i = 0; i < 6; i++) {
        if((pageY >= (framePos + boundaries.top) + (framePosMofidier * i)) &&
         (pageY <= (framePos + boundaries.top + orfDisplayHeight + (framePosMofidier * i)))){
            checkIfWithinORFLocation(boundaries, event, i);
        }
     };
}

function withinFrameVisual(boundaries, event){
    if(event.pageX >= (10 + boundaries.left)  && event.pageX <= (10 + boundaries.left) + orfDisplayWidth){
        if(withinFrameLocations(event.pageY, boundaries)){
            
        }
    }

    return true;
}

function onClick(event) {
    var boundaries = canvas.getBoundingClientRect();
    if(withinFrameVisual(boundaries, event)){

    }
}

window.onload = function(){
    init();
}

</script>
</html>
